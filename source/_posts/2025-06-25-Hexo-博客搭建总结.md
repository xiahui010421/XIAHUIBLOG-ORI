---
title: Hexo 博客搭建总结
date: 2025-06-25T13:30:00.000Z
tags: [blog]
categories: test
---

# Hexo 博客搭建总结

## 1. 环境准备

- 在 Mac 上安装 Node.js 和 npm
- 使用 `npm install -g hexo-cli` 全局安装 Hexo 命令行工具
- 初始化博客目录 `hexo init xia_blog`，进入目录安装依赖 `npm install`

---

## 2. 主题自定义

- 修改 `_config.yml` 中 `theme` 字段切换主题

- 主题结构：

  xia_theme/
   ├── _config.yml           # 主题配置文件（可选）
   ├── layout/               # 页面模板文件夹
   │   ├── _partial/         # 公共部分（如头部 header、底部 footer）
   │   │   ├── header.ejs
   │   │   └── footer.ejs
   │   ├── index.ejs         # 首页模板
   │   ├── post.ejs          # 文章页模板
   │   ├── archive.ejs       # 归档页模板
   │   ├── category.ejs      # 分类页模板
   │   └── tag.ejs           # 标签页模板
   ├── source/               # 主题静态资源（CSS、JS、图片等）
          ├── css/
          │   └── style.css
          ├── js/
         └── images/

- 修改模板文件（例如 `index.ejs`）来自定义页面结构和内容

- 样式写在主题的 `source/css/` 目录下，通过链接引入

---

## 3. 遇到的权限问题（npm 安装报错 EACCES）

- 报错信息类似 `npm ERR! Error: EACCES: permission denied, mkdir ...`
- 解决方法：
  - 不使用 `sudo` 安装，全局包改为用户目录安装
  - 或者使用 `sudo chown -R $(whoami) ~/.npm` 修改 npm 缓存权限

---

## 4. 主题部署问题

- 使用 `hexo clean && hexo generate && hexo deploy` 部署到 GitHub Pages
- 遇到网络连接超时（`Failed to connect to github.com port 443`）的问题
- 解决思路：
  - GitHub的ssh链接就行了

---

## 5. 本地写文章与编码问题
- 新建 Markdown 文件放在 `source/_posts/` 目录下，Hexo 自动识别
- 文章头部 Front-matter 配置（title, date, tags, categories）
- 遇到文章详情页乱码问题

> 在post.ejs添加头部 

、、、

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title><%= page.title %> - <%= config.title %></title>
  <link rel="stylesheet" href="/css/style.css">
</head>

、、、

---

## 6. 自定义博客后台，实现在线文章提交与自动部署
- 使用 Node.js + Express 写后台服务器，监听 3000 端口
- 实现 `/api/posts` POST 接口，接收文章数据，写入 Markdown 文件
- 使用 `exec` 执行 Hexo 命令实现文章自动生成和部署
- 使用简单 Token 认证，保证接口安全
- 添加 `cors` 中间件，解决跨域请求问题

---

## 7. 前端调用后台接口
- 在博客页面写前端 JS，使用 `fetch` 向后端提交文章数据
- 请求头包含 `Authorization: Bearer your-secret-token`
- 处理请求结果，提示文章提交成功或失败

---

## 8. 其他注意点
- 主题样式自定义时，确保 CSS 选择器正确，样式路径引用无误
- 修改模板文件后，执行 `hexo clean && hexo generate` 生成静态文件，再部署
- 使用浏览器开发者工具查看请求和响应，排查问题

---

# 结论
整体流程：
- 环境搭建 → 主题选择 → 本地写作 → 部署到 GitHub Pages
- 后台服务搭建 → 在线编辑提交文章 → 自动部署更新博客

遇到权限、跨域、编码和网络问题，均通过调整权限、添加 cors、检查编码、确认网络设置解决。
